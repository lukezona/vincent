// original version: https://gist.github.com/ClementParis016/ab06847c41160c22f278e4cabe4a0879
tinymce.PluginManager.add("charactercount",function(a){var e=this;function n(){a.theme.panel.find("#charactercount")[0].innerHtml(e.msg())}a.on("init",function(){var t=a.theme.panel&&a.theme.panel.find("#statusbar")[0];t&&window.setTimeout(function(){t.insert({type:"label",name:"charactercount",classes:"charactercount path",disabled:a.settings.readonly},0),t.items().filter(".charactercount")[0].innerHtml(e.msg()),a.on("setcontent beforeaddundo keyup",n)},0)}),e.getCount=function(){var t,e,n=a.getContent({format:"raw"});return(t=n,(e=document.createElement("textarea")).innerHTML=t,e.value).replace(/(<([^>]+)>)/gi,"").length},e.msg=function(){return'<span class="mce-path-item">Characters: '+e.getCount()+"</span>"}});